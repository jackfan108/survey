(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2172:(e,s,t)=>{"use strict";t.d(s,{default:()=>u});var r=t(5155),l=t(2115);let a=(0,t(5647).UU)("https://zcpesmtxvbvkzzmuzids.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpjcGVzbXR4dmJ2a3p6bXV6aWRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI5MDE2ODQsImV4cCI6MjA2ODQ3NzY4NH0.OrGU9fnCnaRQaQArMLbtwBo9redy0IJzkK0izv7MNLg");var i=t(3052);let n=e=>{let{userInfo:s,setUserInfo:t,onSubmit:l,loading:a}=e;return(0,r.jsx)("div",{className:"max-w-sm sm:max-w-md mx-auto",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 sm:p-8 border border-white/20 shadow-2xl",children:[(0,r.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Political Survey"}),(0,r.jsx)("p",{className:"text-gray-300 text-sm sm:text-base",children:"Help us understand your political views."})]}),(0,r.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"First Name *"}),(0,r.jsx)("input",{type:"text",value:s.firstName,onChange:e=>t({...s,firstName:e.target.value}),className:"w-full p-3 sm:p-4 bg-white/5 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all text-base",placeholder:"Enter your first name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Last Name *"}),(0,r.jsx)("input",{type:"text",value:s.lastName,onChange:e=>t({...s,lastName:e.target.value}),className:"w-full p-3 sm:p-4 bg-white/5 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all text-base",placeholder:"Enter your last name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Email Address *"}),(0,r.jsx)("input",{type:"email",value:s.email,onChange:e=>t({...s,email:e.target.value}),className:"w-full p-3 sm:p-4 bg-white/5 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all text-base",placeholder:"Enter your email address"})]}),(0,r.jsx)("button",{onClick:()=>{var e;return s.firstName&&s.lastName&&s.email?(e=s.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))?void l():void alert("Please enter a valid email address"):void alert("Please fill in all fields")},disabled:a,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white font-semibold py-3 sm:py-4 px-6 rounded-xl transition-colors flex items-center justify-center space-x-2 shadow-lg cursor-pointer disabled:cursor-not-allowed text-base",children:a?(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"Start Survey"}),(0,r.jsx)(i.A,{size:20})]})})]})]})})};var o=t(2355);let c=e=>{var s,t,l;let{questions:a,currentQuestionIndex:n,answers:c,onAnswerChange:d,onNextQuestion:m,onPreviousQuestion:x,loading:u}=e;if(!a.length)return(0,r.jsx)("div",{className:"text-white",children:"Loading questions..."});let h=a[n],b=c[h.id]||{},p=()=>void 0!==b.opinion_score&&void 0!==b.importance_score;return(0,r.jsxs)("div",{className:"h-dvh flex flex-col overflow-hidden",children:[(0,r.jsx)("div",{className:"w-full px-4 sm:px-6 py-4 sm:py-6 flex-shrink-0",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[(0,r.jsxs)("span",{children:["Question ",n+1," of ",a.length]}),(0,r.jsxs)("span",{children:[Math.round((n+1)/a.length*100),"% complete"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-blue-500 h-3 rounded-full transition-all duration-300",style:{width:"".concat((n+1)/a.length*100,"%")}})})]})}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 overflow-y-auto",children:(0,r.jsxs)("div",{className:"max-w-2xl w-full space-y-4 sm:space-y-8",children:[(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("h2",{className:"text-lg sm:text-2xl font-bold text-white mb-4 sm:mb-8 leading-tight",children:h.question_text})}),(0,r.jsxs)("div",{className:"space-y-3 sm:space-y-6",children:[(0,r.jsx)("h3",{className:"text-sm sm:text-lg font-semibold text-white text-center",children:"Your Position"}),(0,r.jsxs)("div",{className:"sm:hidden",children:[(0,r.jsx)("div",{className:"text-center mb-3",children:(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full border-2 text-lg font-bold ".concat(void 0!==b.opinion_score?"border-blue-400 bg-blue-500 text-white":"border-gray-400 bg-white/10 text-gray-400"),children:void 0!==b.opinion_score?b.opinion_score:"?"})}),(0,r.jsxs)("div",{className:"px-4",children:[(0,r.jsx)("input",{type:"range",min:"1",max:"9",step:"1",value:null!=(s=b.opinion_score)?s:5,onChange:e=>d("opinion_score",parseInt(e.target.value)),onTouchStart:e=>d("opinion_score",parseInt(e.target.value)),onMouseDown:e=>d("opinion_score",parseInt(e.target.value)),className:"w-full h-3 bg-white/10 rounded-lg appearance-none cursor-pointer slider",style:{background:"linear-gradient(to right, #3B82F6 0%, #3B82F6 ".concat(((null!=(t=b.opinion_score)?t:5)-1)/8*100,"%, rgba(255,255,255,0.1) ").concat(((null!=(l=b.opinion_score)?l:5)-1)/8*100,"%, rgba(255,255,255,0.1) 100%)")}}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-200 mt-2 px-1",children:[(0,r.jsx)("span",{children:h.label_0}),(0,r.jsx)("span",{children:h.label_10})]})]})]}),(0,r.jsxs)("div",{className:"hidden sm:block",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:Array.from({length:9},(e,s)=>{let t=s+1;return(0,r.jsx)("button",{onClick:()=>d("opinion_score",t),className:"w-14 h-14 rounded-full border-2 text-base font-semibold transition-all cursor-pointer flex-shrink-0 ".concat(b.opinion_score===t?"border-blue-400 bg-blue-500 text-white":"border-gray-400 bg-white/10 text-gray-200 hover:border-blue-300 hover:bg-white/20"),children:t},t)})})}),(0,r.jsx)("div",{className:"flex items-center justify-center mt-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center text-base text-gray-200",style:{width:"calc(9 * 3.5rem + 8 * 0.5rem)"},children:[(0,r.jsx)("span",{children:h.label_0}),h.label_5&&(0,r.jsx)("span",{children:h.label_5}),(0,r.jsx)("span",{children:h.label_10})]})})]})]}),(0,r.jsxs)("div",{className:"space-y-3 sm:space-y-6 pt-4 sm:pt-8 border-t border-white/20",children:[(0,r.jsx)("h3",{className:"text-sm sm:text-lg font-semibold text-white text-center",children:"How important is this issue to you personally?"}),(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-2 sm:space-x-4",children:[(0,r.jsx)("span",{className:"text-xs sm:text-base text-gray-200",children:"Barely matters"}),(0,r.jsx)("div",{className:"flex space-x-1 sm:space-x-4",children:Array.from({length:5},(e,s)=>{let t=s+1;return(0,r.jsx)("button",{onClick:()=>d("importance_score",t),className:"w-8 h-8 sm:w-14 sm:h-14 rounded-full border-2 text-xs sm:text-base font-semibold transition-all cursor-pointer ".concat(b.importance_score===t?"border-blue-400 bg-blue-500 text-white":"border-gray-400 bg-white/10 text-gray-200 hover:border-blue-300 hover:bg-white/20"),children:t},t)})}),(0,r.jsx)("span",{className:"text-xs sm:text-base text-gray-200",children:"Extremely important"})]})]})]})}),(0,r.jsx)("div",{className:"w-full px-4 sm:px-6 py-4 sm:py-6 flex-shrink-0",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto flex justify-between",children:[n>0?(0,r.jsxs)("button",{onClick:x,disabled:u,className:"w-28 sm:w-36 flex items-center justify-center space-x-1 sm:space-x-2 px-3 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold transition-all text-sm sm:text-base ".concat(u?"bg-emerald-800 text-emerald-400 cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700 cursor-pointer"),children:[(0,r.jsx)(o.A,{size:16,className:"sm:w-5 sm:h-5"}),(0,r.jsx)("span",{children:"Previous"})]}):(0,r.jsx)("div",{className:"w-28 sm:w-36"}),(0,r.jsx)("button",{onClick:m,disabled:!p()||u,className:"w-28 sm:w-36 flex items-center justify-center space-x-1 sm:space-x-2 px-3 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold transition-all text-sm sm:text-base ".concat(!p()||u?"bg-sky-800 text-sky-400 cursor-not-allowed":"bg-sky-600 text-white hover:bg-sky-700 cursor-pointer"),children:u?(0,r.jsx)("div",{className:"w-4 h-4 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:n===a.length-1?"Complete":"Next"}),(0,r.jsx)(i.A,{size:16,className:"sm:w-5 sm:h-5"})]})})]})})]})};var d=t(5196),m=t(6766);let x=()=>{let[e,s]=(0,l.useState)(""),[t,a]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("https://api.giphy.com/v1/gifs/random?api_key=".concat("lxGVMqO5EnOA35hVswGDWSb1Nq78hZdo","&tag=politics+funny&rating=r")),t=await e.json();t.data&&t.data.images&&s(t.data.images.original.url)}catch(e){console.error("Error fetching GIF:",e)}finally{a(!1)}})()},[]),(0,r.jsx)("div",{className:"max-w-sm sm:max-w-lg mx-auto text-center",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 sm:p-8",children:[(0,r.jsx)("div",{className:"bg-green-500/20 border-2 border-green-400 rounded-full w-16 h-16 sm:w-24 sm:h-24 flex items-center justify-center mx-auto mb-4 sm:mb-6",children:(0,r.jsx)(d.A,{size:32,className:"text-green-400 sm:w-12 sm:h-12"})}),(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-4",children:"Thank You!"}),(0,r.jsx)("p",{className:"text-lg sm:text-xl text-gray-300 mb-4 sm:mb-6",children:"Your responses have been recorded successfully."}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-gray-200 leading-relaxed",children:"Thank you for participating in our political survey. Your insights help us better understand if you're a libtard commie or a bigotted fascist. Stay tuned for the results!"}),(0,r.jsx)("div",{className:"mt-6 sm:mt-8 rounded-lg overflow-hidden",children:t?(0,r.jsx)("div",{className:"w-full h-48 sm:h-64 bg-gray-700 rounded-lg flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8 border-2 border-white border-t-transparent rounded-full animate-spin"})}):e?(0,r.jsx)(m.default,{src:e,alt:"Random political meme",width:400,height:256,className:"w-full h-48 sm:h-64 object-contain rounded-lg bg-gray-900"}):(0,r.jsx)("div",{className:"w-full h-48 sm:h-64 bg-gray-700 rounded-lg flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-gray-400 text-sm sm:text-base",children:"No meme available"})})})]})})},u=()=>{let[e,s]=(0,l.useState)("user-info"),[t,i]=(0,l.useState)(0),[o,d]=(0,l.useState)({firstName:"",lastName:"",email:""}),[m,u]=(0,l.useState)([]),[h,b]=(0,l.useState)({}),[p,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{g()},[]);let g=async()=>{f(!0);try{let{data:e,error:s}=await a.from("questions").select("*");s?console.error("Error loading questions:",s):e&&0!==e.length?u(e.slice(0,1)):console.log("No questions found in database")}catch(e){console.error("Failed to load questions:",e)}f(!1)},w=async()=>{f(!0);try{var e;console.log("Creating survey with user info:",o);let{data:t,error:r}=await a.from("surveys").insert([{first_name:o.firstName,last_name:o.lastName,email:o.email}]).select();if(r){console.error("Error creating survey:",r),alert("Error saving survey: ".concat(r.message)),f(!1);return}let l=null==(e=t[0])?void 0:e.id;console.log("Survey created with ID:",l);let i=Object.entries(h).map(e=>{let[s,t]=e;return{survey_id:l,question_id:parseInt(s),opinion_score:t.opinion_score,importance_score:t.importance_score}});console.log("Inserting answers:",i);let{error:n}=await a.from("answers").insert(i);if(n){console.error("Error saving answers:",n),alert("Error saving answers: ".concat(n.message)),f(!1);return}console.log("Survey completed successfully"),f(!1),s("complete")}catch(e){console.error("Error completing survey:",e),alert("Error completing survey: ".concat(e instanceof Error?e.message:String(e))),f(!1)}};return(0,r.jsxs)("div",{className:"main-content h-full w-full",style:{height:"100dvh"},children:["user-info"===e&&(0,r.jsx)("div",{className:"h-full p-4 sm:p-6 md:p-8 flex items-center justify-center w-full",children:(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(n,{userInfo:o,setUserInfo:d,onSubmit:()=>{s("survey")},loading:p})})}),"survey"===e&&(0,r.jsx)(c,{questions:m,currentQuestionIndex:t,answers:h,onAnswerChange:(e,s)=>{var r;let l=null==(r=m[t])?void 0:r.id;l&&b(t=>({...t,[l]:{...t[l],[e]:s}}))},onNextQuestion:()=>{t<m.length-1?i(t+1):w()},onPreviousQuestion:()=>{t>0&&i(t-1)},loading:p}),"complete"===e&&(0,r.jsx)("div",{className:"h-full p-4 sm:p-6 md:p-8 flex items-center justify-center",children:(0,r.jsx)(x,{})})]})}},2544:(e,s,t)=>{Promise.resolve().then(t.bind(t,2172))}},e=>{e.O(0,[956,441,964,358],()=>e(e.s=2544)),_N_E=e.O()}]);